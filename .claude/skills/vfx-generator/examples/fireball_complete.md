# Complete Example: Fireball Effect Set

This example shows a complete fireball implementation including:
1. **Fireball projectile** - The moving projectile
2. **Fire explosion** - Impact effect when it hits
3. **Burning status** - DoT applied to targets

## File 1: res://vfx/projectiles/fireball.tscn

Uses **layered circles** (Polygon2D) for a round, organic visual with animated pulsing.

```
[gd_scene load_steps=4 format=3 uid="uid://fireball_projectile"]

[ext_resource type="Script" path="res://vfx/projectiles/fireball.gd" id="1_script"]

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_trail"]
particle_flag_disable_z = true
direction = Vector3(-1, 0, 0)
spread = 25.0
initial_velocity_min = 80.0
initial_velocity_max = 120.0
gravity = Vector3(0, 0, 0)
damping_min = 1.0
damping_max = 2.0
scale_min = 0.3
scale_max = 0.8
color = Color(1, 0.255, 0.212, 1)

[sub_resource type="CircleShape2D" id="CircleShape2D_hitbox"]
radius = 12.0

[node name="Fireball" type="Node2D" groups=["projectile"]]
script = ExtResource("1_script")

# Visual container for animation
[node name="Visual" type="Node2D" parent="."]

# Layered circles: outer (large, transparent red), mid (orange), core (yellow)
[node name="OuterGlow" type="Polygon2D" parent="Visual"]
color = Color(1, 0.259, 0.129, 0.4)
polygon = PackedVector2Array(-18, 0, -15.6, -9, -9, -15.6, 0, -18, 9, -15.6, 15.6, -9, 18, 0, 15.6, 9, 9, 15.6, 0, 18, -9, 15.6, -15.6, 9)

[node name="MidGlow" type="Polygon2D" parent="Visual"]
color = Color(1, 0.42, 0.21, 0.7)
polygon = PackedVector2Array(-12, 0, -10.4, -6, -6, -10.4, 0, -12, 6, -10.4, 10.4, -6, 12, 0, 10.4, 6, 6, 10.4, 0, 12, -6, 10.4, -10.4, 6)

[node name="Core" type="Polygon2D" parent="Visual"]
color = Color(1, 0.863, 0, 1)
polygon = PackedVector2Array(-6, 0, -5.2, -3, -3, -5.2, 0, -6, 3, -5.2, 5.2, -3, 6, 0, 5.2, 3, 3, 5.2, 0, 6, -3, 5.2, -5.2, 3)

[node name="Trail" type="GPUParticles2D" parent="."]
amount = 25
lifetime = 0.4
process_material = SubResource("ParticleProcessMaterial_trail")

[node name="Glow" type="PointLight2D" parent="."]
color = Color(1, 0.55, 0.26, 1)
energy = 1.8
texture_scale = 2.0

[node name="Hitbox" type="Area2D" parent="."]
collision_layer = 4
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hitbox"]
shape = SubResource("CircleShape2D_hitbox")
```

## File 2: res://vfx/projectiles/fireball.gd

Includes **pulsing and wobbling animation** for organic feel.

```gdscript
## Fireball - Fire projectile VFX
## Generated by VFX Generator skill
extends Node2D

# ===== EXPORTED PROPERTIES =====
@export var speed: float = 450.0
@export var direction: Vector2 = Vector2.RIGHT
@export var max_distance: float = 800.0
@export var pierce_count: int = 0
@export var impact_effect: PackedScene
@export var status_effect: PackedScene

# ===== ANIMATION CONSTANTS =====
const PULSE_SPEED: float = 8.0       # How fast it pulses
const PULSE_AMOUNT: float = 0.15     # Scale variation
const WOBBLE_SPEED: float = 12.0     # How fast layers wobble
const WOBBLE_AMOUNT: float = 0.08    # Wobble intensity

# ===== INTERNAL STATE =====
var _traveled: float = 0.0
var _pierced: int = 0
var _time: float = 0.0

# ===== NODE REFERENCES =====
@onready var visual: Node2D = $Visual
@onready var outer_glow: Polygon2D = $Visual/OuterGlow
@onready var mid_glow: Polygon2D = $Visual/MidGlow
@onready var core: Polygon2D = $Visual/Core
@onready var trail: GPUParticles2D = $Trail
@onready var glow: PointLight2D = $Glow
@onready var hitbox: Area2D = $Hitbox

func _ready() -> void:
	hitbox.area_entered.connect(_on_hit)
	hitbox.body_entered.connect(_on_hit)

func _process(delta: float) -> void:
	_time += delta

	var movement = direction.normalized() * speed * delta
	position += movement
	_traveled += movement.length()
	rotation = direction.angle()

	# Animate visual for organic feel
	_animate_visual()

	if _traveled >= max_distance:
		_spawn_impact()
		queue_free()

func _animate_visual() -> void:
	# Pulse scale for breathing effect
	var pulse = 1.0 + sin(_time * PULSE_SPEED) * PULSE_AMOUNT
	visual.scale = Vector2(pulse, pulse)

	# Wobble layers independently
	var wobble1 = sin(_time * WOBBLE_SPEED) * WOBBLE_AMOUNT
	var wobble2 = cos(_time * WOBBLE_SPEED * 1.3) * WOBBLE_AMOUNT
	outer_glow.scale = Vector2(1.0 + wobble1, 1.0 - wobble1)
	mid_glow.scale = Vector2(1.0 - wobble2, 1.0 + wobble2)

	# Flicker the glow energy
	glow.energy = 1.5 + sin(_time * PULSE_SPEED * 2.0) * 0.4

func _on_hit(body: Node2D) -> void:
	if body.is_in_group("projectile"):
		return

	# Apply burning status if available
	if status_effect and body.has_method("take_damage"):
		var burning = status_effect.instantiate()
		get_tree().current_scene.add_child(burning)
		if burning.has_method("attach_to"):
			burning.attach_to(body)

	_pierced += 1
	if _pierced > pierce_count:
		_spawn_impact()
		queue_free()

func _spawn_impact() -> void:
	if impact_effect:
		var impact = impact_effect.instantiate()
		get_parent().add_child(impact)
		impact.global_position = global_position

func set_target(target_pos: Vector2) -> void:
	direction = (target_pos - global_position).normalized()
```

## File 3: res://vfx/impacts/fire_explosion.tscn

```
[gd_scene load_steps=4 format=3 uid="uid://fire_explosion"]

[ext_resource type="Script" path="res://vfx/impacts/fire_explosion.gd" id="1_script"]

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_burst"]
emission_shape = 1
emission_sphere_radius = 8.0
particle_flag_disable_z = true
direction = Vector3(0, 0, 0)
spread = 180.0
gravity = Vector3(0, 150, 0)
initial_velocity_min = 120.0
initial_velocity_max = 220.0
damping_min = 2.0
damping_max = 4.0
scale_min = 0.5
scale_max = 1.5
color = Color(1, 0.42, 0.21, 1)

[sub_resource type="Gradient" id="Gradient_color"]
offsets = PackedFloat32Array(0, 0.5, 1)
colors = PackedColorArray(1, 0.86, 0, 1, 1, 0.42, 0.21, 0.8, 0.5, 0.1, 0.05, 0)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_color"]
gradient = SubResource("Gradient_color")

[node name="FireExplosion" type="Node2D"]
script = ExtResource("1_script")

[node name="Burst" type="GPUParticles2D" parent="."]
amount = 35
process_material = SubResource("ParticleProcessMaterial_burst")
lifetime = 0.5
one_shot = true
explosiveness = 1.0

[node name="Flash" type="ColorRect" parent="."]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(20, 20)
color = Color(1, 0.86, 0, 1)

[node name="LightBurst" type="PointLight2D" parent="."]
color = Color(1, 0.55, 0.26, 1)
energy = 2.5
texture_scale = 3.0
```

## File 4: res://vfx/impacts/fire_explosion.gd

```gdscript
## Fire Explosion - Impact VFX
## Generated by VFX Generator skill
extends Node2D

const DURATION: float = 0.4
const SHAKE_INTENSITY: float = 12.0

@onready var burst: GPUParticles2D = $Burst
@onready var flash: ColorRect = $Flash
@onready var light_burst: PointLight2D = $LightBurst

func _ready() -> void:
	_play_effect()

func _play_effect() -> void:
	# Camera shake
	_shake_camera()

	# Animate flash
	var tween = create_tween()
	tween.set_parallel(true)

	flash.scale = Vector2(0.5, 0.5)
	tween.tween_property(flash, "scale", Vector2(2.5, 2.5), DURATION * 0.4)
	tween.tween_property(flash, "modulate:a", 0.0, DURATION * 0.5)
	tween.tween_property(light_burst, "energy", 0.0, DURATION * 0.6)

	burst.emitting = true

	await get_tree().create_timer(DURATION + 0.2).timeout
	queue_free()

func _shake_camera() -> void:
	var camera = get_viewport().get_camera_2d()
	if not camera:
		return

	var original_offset = camera.offset
	var shake_tween = create_tween()

	for i in range(6):
		var offset = Vector2(
			randf_range(-SHAKE_INTENSITY, SHAKE_INTENSITY),
			randf_range(-SHAKE_INTENSITY, SHAKE_INTENSITY)
		)
		shake_tween.tween_property(camera, "offset", original_offset + offset, 0.05)

	shake_tween.tween_property(camera, "offset", original_offset, 0.1)
```

## File 5: res://vfx/status/burning.tscn

```
[gd_scene load_steps=5 format=3 uid="uid://burning_status"]

[ext_resource type="Script" path="res://vfx/status/burning.gd" id="1_script"]

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_flames"]
emission_shape = 1
emission_sphere_radius = 10.0
particle_flag_disable_z = true
direction = Vector3(0, -1, 0)
spread = 25.0
gravity = Vector3(0, -40, 0)
initial_velocity_min = 25.0
initial_velocity_max = 45.0
damping_min = 0.5
damping_max = 1.0
scale_min = 0.3
scale_max = 0.7
color = Color(1, 0.42, 0.21, 1)

[sub_resource type="Animation" id="Animation_pulse"]
resource_name = "pulse"
length = 1.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GroundGlow:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector2(1, 1), Vector2(1.15, 1.15), Vector2(1, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("GroundGlow:modulate:a")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.5, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.4, 0.6, 0.4]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_burning"]
_data = {
"pulse": SubResource("Animation_pulse")
}

[node name="Burning" type="Node2D"]
script = ExtResource("1_script")

[node name="Particles" type="GPUParticles2D" parent="."]
position = Vector2(0, -20)
amount = 12
process_material = SubResource("ParticleProcessMaterial_flames")
lifetime = 0.8

[node name="GroundGlow" type="ColorRect" parent="."]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -14.0
offset_top = 6.0
offset_right = 14.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(14, 7)
color = Color(1, 0.25, 0.21, 0.5)

[node name="PulseAnimation" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_burning")
}
autoplay = "pulse"

[node name="DamageTick" type="Timer" parent="."]
wait_time = 1.0
autostart = true
```

## File 6: res://vfx/status/burning.gd

```gdscript
## Burning - Fire DoT status effect
## Generated by VFX Generator skill
extends Node2D

@export var damage_per_tick: int = 3
@export var tick_interval: float = 1.0
@export var duration: float = 5.0

var target: Node2D = null

@onready var particles: GPUParticles2D = $Particles
@onready var ground_glow: ColorRect = $GroundGlow
@onready var damage_tick: Timer = $DamageTick

func _ready() -> void:
	damage_tick.wait_time = tick_interval
	damage_tick.timeout.connect(_on_damage_tick)

	if duration > 0:
		get_tree().create_timer(duration).timeout.connect(remove_status)

func _process(_delta: float) -> void:
	if target and is_instance_valid(target):
		global_position = target.global_position

func _on_damage_tick() -> void:
	if target and is_instance_valid(target) and target.has_method("take_damage"):
		target.take_damage(damage_per_tick, "fire")

func attach_to(character: Node2D) -> void:
	target = character
	var current_parent = get_parent()
	if current_parent:
		current_parent.remove_child(self)
	character.add_child(self)
	position = Vector2.ZERO

func remove_status() -> void:
	damage_tick.stop()
	particles.emitting = false

	var tween = create_tween()
	tween.tween_property(ground_glow, "modulate:a", 0.0, 0.3)

	await tween.finished
	queue_free()
```

## Usage Example

```gdscript
# In your combat/ability script:

func cast_fireball(caster: Node2D, target_pos: Vector2) -> void:
	# Load scenes
	var fireball_scene = preload("res://vfx/projectiles/fireball.tscn")
	var explosion_scene = preload("res://vfx/impacts/fire_explosion.tscn")
	var burning_scene = preload("res://vfx/status/burning.tscn")

	# Create fireball
	var fireball = fireball_scene.instantiate()
	get_tree().current_scene.add_child(fireball)

	# Position and configure
	fireball.global_position = caster.global_position + Vector2(20, 0)
	fireball.set_target(target_pos)
	fireball.impact_effect = explosion_scene
	fireball.status_effect = burning_scene

# Alternative: Pre-configure in Inspector
# 1. Open fireball.tscn
# 2. Drag fire_explosion.tscn to impact_effect slot
# 3. Drag burning.tscn to status_effect slot
# 4. Now just instantiate and position:

func cast_fireball_simple(caster: Node2D, target_pos: Vector2) -> void:
	var fireball = preload("res://vfx/projectiles/fireball.tscn").instantiate()
	get_tree().current_scene.add_child(fireball)
	fireball.global_position = caster.global_position
	fireball.set_target(target_pos)
```

## Testing

1. Create a test scene with a Node2D
2. Add a script that spawns the fireball on click:

```gdscript
extends Node2D

func _input(event: InputEvent) -> void:
	if event is InputEventMouseButton and event.pressed:
		var fireball = preload("res://vfx/projectiles/fireball.tscn").instantiate()
		add_child(fireball)
		fireball.position = Vector2(100, 300)
		fireball.set_target(get_global_mouse_position())
		fireball.impact_effect = preload("res://vfx/impacts/fire_explosion.tscn")
```

3. Run the scene (F6)
4. Click to shoot fireballs!
